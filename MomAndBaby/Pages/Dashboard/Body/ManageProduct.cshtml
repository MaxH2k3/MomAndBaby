@page "/manage_product"
@model MomAndBaby.Pages.Dashboard.Body.ManageProduct

<div class="content-body">

    <!-- Page Headings Start -->
    <div class="row justify-content-between align-items-center mb-10">

        <!-- Page Heading Start -->
        <div class="col-12 col-lg-auto mb-20">
            <div class="page-heading">
                <h3>eCommerce <span>/ Manage Product</span></h3>
            </div>
        </div><!-- Page Heading End -->

    </div><!-- Page Headings End -->

    <div class="row">

        <!--Manage Product List Start-->
        <div class="col-12">
            <div class="table-responsive">
                <table class="table table-vertical-middle">
                    <thead>
                    <tr>
                        <th>Product ID</th>
                        <th>Photo</th>
                        <th>Product Name</th>
                        <th>Price</th>
                        @* <th>Sales</th> *@
                        <th>In Stock</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var product in Model.Products)
                    {
                        <tr>
                            <td>@product.Id</td>
                            <td><img src="@product.Image" alt="" class="product-image rounded-circle" style="width: 60px; height: 60px;"></td>
                            <td>@product.Name</td>
                            <td>$@product.Price</td>
                            @* <td></td> *@
                            <td>@product.Stock</td>
                            <td>@product.CreatedAt</td>
                            
                            <td>
                                @switch(product.Status)
                                {
                                    case "Out Of Stock":
                                        <span class="badge badge-danger">Out Of Stock</span>
                                        break;
                                    case "Draft":
                                        <span class="badge badge-secondary">Draft</span>
                                        break;
                                    case "Available":
                                        <span class="badge badge-success">Available</span>
                                        break;
                                    default:
                                        <span class="badge badge-warning">Unavailable</span>
                                        break;
                                }
                            </td>
                            <td>
                                <div class="table-action-buttons">
                                    <a class="view button button-box button-xs button-primary" href="invoice-details.html"><i class="zmdi zmdi-more"></i></a>
                                    <a class="edit button button-box button-xs button-info" href="/updateproduct?productId=@product.Id"><i class="zmdi zmdi-edit"></i></a>
                                    <form method="post" asp-page-handler="Delete" asp-route-productId="@product.Id" class="d-inline">
                                        <button type="submit" class="delete button button-box button-xs button-danger" onclick="return confirm('Are you sure you want to delete this product?');">
                                            <i class="zmdi zmdi-delete"></i>
                                        </button>
                                    </form>
                                    @* <a class="delete button button-box button-xs button-danger" href="#"><i class="zmdi zmdi-delete"></i></a> *@
                                </div>
                            </td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>
        <!--Manage Product List End-->

    </div>

</div>

@if (TempData["ErrorMessage"] != null || TempData["SuccessMessage"] != null)
{
    <script type="text/javascript">
    window.onload = function () {
        @if (TempData["ErrorMessage"] != null)
        {
            <text>alert("@TempData["ErrorMessage"]");</text>
        }

        @if (TempData["SuccessMessage"] != null)
        {
            <text>alert("@TempData["SuccessMessage"]");</text>
        }
    };
</script>
}